/*!
 * @pixi/utils - v7.0.0-beta.3
 * Compiled Thu, 13 Oct 2022 15:35:43 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */import{settings as h}from"@pixi/settings";import{isMobile as oa}from"@pixi/settings";import{default as ia}from"eventemitter3";import{default as sa}from"earcut";import{parse as _,format as D,resolve as M}from"url";import{BLEND_MODES as d}from"@pixi/constants";const w={parse:_,format:D,resolve:M};function u(e){if(typeof e!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(e)}`)}function k(e){return e.split("?")[0].split("#")[0]}function N(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function $(e,r,t){return e.replace(new RegExp(N(r),"g"),t)}function I(e,r){let t="",a=0,o=-1,n=0,i;for(let l=0;l<=e.length;++l){if(l<e.length)i=e.charCodeAt(l);else{if(i===47)break;i=47}if(i===47){if(!(o===l-1||n===1))if(o!==l-1&&n===2){if(t.length<2||a!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){const s=t.lastIndexOf("/");if(s!==t.length-1){s===-1?(t="",a=0):(t=t.slice(0,s),a=t.length-1-t.lastIndexOf("/")),o=l,n=0;continue}}else if(t.length===2||t.length===1){t="",a=0,o=l,n=0;continue}}r&&(t.length>0?t+="/..":t="..",a=2)}else t.length>0?t+=`/${e.slice(o+1,l)}`:t=e.slice(o+1,l),a=l-o-1;o=l,n=0}else i===46&&n!==-1?++n:n=-1}return t}const A={toPosix(e){return $(e,"\\","/")},isUrl(e){return/^https?:/.test(this.toPosix(e))},isDataUrl(e){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(e)},hasProtocol(e){return/^[^/:]+:\//.test(this.toPosix(e))},getProtocol(e){u(e),e=this.toPosix(e);let r="";const t=/^file:\/\/\//.exec(e),a=/^[^/:]+:\/\//.exec(e),o=/^[^/:]+:\//.exec(e);if(t||a||o){const n=t?.[0]||a?.[0]||o?.[0];r=n,e=e.slice(n.length)}return r},toAbsolute(e,r,t){if(this.isDataUrl(e))return e;const a=k(this.toPosix(r??h.ADAPTER.getBaseUrl())),o=k(this.toPosix(t??this.rootname(a)));return u(e),e=this.toPosix(e),e.startsWith("/")?A.join(o,e.slice(1)):this.isAbsolute(e)?e:this.join(a,e)},normalize(e){if(e=this.toPosix(e),u(e),e.length===0)return".";let r="";const t=e.startsWith("/");this.hasProtocol(e)&&(r=this.rootname(e),e=e.slice(r.length));const a=e.endsWith("/");return e=I(e,!1),e.length>0&&a&&(e+="/"),t?`/${e}`:r+e},isAbsolute(e){return u(e),e=this.toPosix(e),this.hasProtocol(e)?!0:e.startsWith("/")},join(...e){if(e.length===0)return".";let r;for(let t=0;t<e.length;++t){const a=e[t];if(u(a),a.length>0)if(r===void 0)r=a;else{const o=e[t-1]??"";this.extname(o)?r+=`/../${a}`:r+=`/${a}`}}return r===void 0?".":this.normalize(r)},dirname(e){if(u(e),e.length===0)return".";e=this.toPosix(e);let r=e.charCodeAt(0);const t=r===47;let a=-1,o=!0;const n=this.getProtocol(e),i=e;e=e.slice(n.length);for(let l=e.length-1;l>=1;--l)if(r=e.charCodeAt(l),r===47){if(!o){a=l;break}}else o=!1;return a===-1?t?"/":this.isUrl(i)?n+e:n:t&&a===1?"//":n+e.slice(0,a)},rootname(e){u(e),e=this.toPosix(e);let r="";if(e.startsWith("/")?r="/":r=this.getProtocol(e),this.isUrl(e)){const t=e.indexOf("/",r.length);t!==-1?r=e.slice(0,t):r=e,r.endsWith("/")||(r+="/")}return r},basename(e,r){u(e),r&&u(r),e=this.toPosix(e);let t=0,a=-1,o=!0,n;if(r!==void 0&&r.length>0&&r.length<=e.length){if(r.length===e.length&&r===e)return"";let i=r.length-1,l=-1;for(n=e.length-1;n>=0;--n){const s=e.charCodeAt(n);if(s===47){if(!o){t=n+1;break}}else l===-1&&(o=!1,l=n+1),i>=0&&(s===r.charCodeAt(i)?--i===-1&&(a=n):(i=-1,a=l))}return t===a?a=l:a===-1&&(a=e.length),e.slice(t,a)}for(n=e.length-1;n>=0;--n)if(e.charCodeAt(n)===47){if(!o){t=n+1;break}}else a===-1&&(o=!1,a=n+1);return a===-1?"":e.slice(t,a)},extname(e){u(e),e=this.toPosix(e);let r=-1,t=0,a=-1,o=!0,n=0;for(let i=e.length-1;i>=0;--i){const l=e.charCodeAt(i);if(l===47){if(!o){t=i+1;break}continue}a===-1&&(o=!1,a=i+1),l===46?r===-1?r=i:n!==1&&(n=1):r!==-1&&(n=-1)}return r===-1||a===-1||n===0||n===1&&r===a-1&&r===t+1?"":e.slice(r,a)},parse(e){u(e);const r={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return r;e=this.toPosix(e);let t=e.charCodeAt(0);const a=this.isAbsolute(e);let o;r.root=this.rootname(e),a||this.hasProtocol(e)?o=1:o=0;let n=-1,i=0,l=-1,s=!0,f=e.length-1,c=0;for(;f>=o;--f){if(t=e.charCodeAt(f),t===47){if(!s){i=f+1;break}continue}l===-1&&(s=!1,l=f+1),t===46?n===-1?n=f:c!==1&&(c=1):n!==-1&&(c=-1)}return n===-1||l===-1||c===0||c===1&&n===l-1&&n===i+1?l!==-1&&(i===0&&a?r.base=r.name=e.slice(1,l):r.base=r.name=e.slice(i,l)):(i===0&&a?(r.name=e.slice(1,n),r.base=e.slice(1,l)):(r.name=e.slice(i,n),r.base=e.slice(i,l)),r.ext=e.slice(n,l)),r.dir=this.dirname(e),r},sep:"/",delimiter:":"};h.RETINA_PREFIX=/@([0-9\.]+)x/,h.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;function O(){}function L(){}let y;function U(){return typeof y>"u"&&(y=function(){const e={stencil:!0,failIfMajorPerformanceCaveat:h.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!h.ADAPTER.getWebGLRenderingContext())return!1;const r=h.ADAPTER.createCanvas();let t=r.getContext("webgl",e)||r.getContext("experimental-webgl",e);const a=!!(t&&t.getContextAttributes().stencil);if(t){const o=t.getExtension("WEBGL_lose_context");o&&o.loseContext()}return t=null,a}catch{return!1}}()),y}var q="#f0f8ff",F="#faebd7",S="#00ffff",W="#7fffd4",z="#f0ffff",B="#f5f5dc",j="#ffe4c4",J="#000000",G="#ffebcd",Y="#0000ff",H="#8a2be2",V="#a52a2a",X="#deb887",Q="#5f9ea0",K="#7fff00",Z="#d2691e",ee="#ff7f50",re="#6495ed",te="#fff8dc",ae="#dc143c",oe="#00ffff",ne="#00008b",ie="#008b8b",le="#b8860b",se="#a9a9a9",fe="#006400",ce="#a9a9a9",de="#bdb76b",ue="#8b008b",he="#556b2f",ge="#ff8c00",ve="#9932cc",be="#8b0000",me="#e9967a",pe="#8fbc8f",ye="#483d8b",we="#2f4f4f",ke="#2f4f4f",Ae="#00ced1",xe="#9400d3",Ee="#ff1493",Pe="#00bfff",Ce="#696969",Re="#696969",Te="#1e90ff",_e="#b22222",De="#fffaf0",Me="#228b22",Ne="#ff00ff",$e="#dcdcdc",Ie="#f8f8ff",Oe="#daa520",Le="#ffd700",Ue="#808080",qe="#008000",Fe="#adff2f",Se="#808080",We="#f0fff0",ze="#ff69b4",Be="#cd5c5c",je="#4b0082",Je="#fffff0",Ge="#f0e68c",Ye="#fff0f5",He="#e6e6fa",Ve="#7cfc00",Xe="#fffacd",Qe="#add8e6",Ke="#f08080",Ze="#e0ffff",er="#fafad2",rr="#d3d3d3",tr="#90ee90",ar="#d3d3d3",or="#ffb6c1",nr="#ffa07a",ir="#20b2aa",lr="#87cefa",sr="#778899",fr="#778899",cr="#b0c4de",dr="#ffffe0",ur="#00ff00",hr="#32cd32",gr="#faf0e6",vr="#ff00ff",br="#800000",mr="#66cdaa",pr="#0000cd",yr="#ba55d3",wr="#9370db",kr="#3cb371",Ar="#7b68ee",xr="#00fa9a",Er="#48d1cc",Pr="#c71585",Cr="#191970",Rr="#f5fffa",Tr="#ffe4e1",_r="#ffe4b5",Dr="#ffdead",Mr="#000080",Nr="#fdf5e6",$r="#808000",Ir="#6b8e23",Or="#ffa500",Lr="#ff4500",Ur="#da70d6",qr="#eee8aa",Fr="#98fb98",Sr="#afeeee",Wr="#db7093",zr="#ffefd5",Br="#ffdab9",jr="#cd853f",Jr="#ffc0cb",Gr="#dda0dd",Yr="#b0e0e6",Hr="#800080",Vr="#663399",Xr="#ff0000",Qr="#bc8f8f",Kr="#4169e1",Zr="#8b4513",et="#fa8072",rt="#f4a460",tt="#2e8b57",at="#fff5ee",ot="#a0522d",nt="#c0c0c0",it="#87ceeb",lt="#6a5acd",st="#708090",ft="#708090",ct="#fffafa",dt="#00ff7f",ut="#4682b4",ht="#d2b48c",gt="#008080",vt="#d8bfd8",bt="#ff6347",mt="#40e0d0",pt="#ee82ee",yt="#f5deb3",wt="#ffffff",kt="#f5f5f5",At="#ffff00",xt="#9acd32",Et={aliceblue:q,antiquewhite:F,aqua:S,aquamarine:W,azure:z,beige:B,bisque:j,black:J,blanchedalmond:G,blue:Y,blueviolet:H,brown:V,burlywood:X,cadetblue:Q,chartreuse:K,chocolate:Z,coral:ee,cornflowerblue:re,cornsilk:te,crimson:ae,cyan:oe,darkblue:ne,darkcyan:ie,darkgoldenrod:le,darkgray:se,darkgreen:fe,darkgrey:ce,darkkhaki:de,darkmagenta:ue,darkolivegreen:he,darkorange:ge,darkorchid:ve,darkred:be,darksalmon:me,darkseagreen:pe,darkslateblue:ye,darkslategray:we,darkslategrey:ke,darkturquoise:Ae,darkviolet:xe,deeppink:Ee,deepskyblue:Pe,dimgray:Ce,dimgrey:Re,dodgerblue:Te,firebrick:_e,floralwhite:De,forestgreen:Me,fuchsia:Ne,gainsboro:$e,ghostwhite:Ie,goldenrod:Oe,gold:Le,gray:Ue,green:qe,greenyellow:Fe,grey:Se,honeydew:We,hotpink:ze,indianred:Be,indigo:je,ivory:Je,khaki:Ge,lavenderblush:Ye,lavender:He,lawngreen:Ve,lemonchiffon:Xe,lightblue:Qe,lightcoral:Ke,lightcyan:Ze,lightgoldenrodyellow:er,lightgray:rr,lightgreen:tr,lightgrey:ar,lightpink:or,lightsalmon:nr,lightseagreen:ir,lightskyblue:lr,lightslategray:sr,lightslategrey:fr,lightsteelblue:cr,lightyellow:dr,lime:ur,limegreen:hr,linen:gr,magenta:vr,maroon:br,mediumaquamarine:mr,mediumblue:pr,mediumorchid:yr,mediumpurple:wr,mediumseagreen:kr,mediumslateblue:Ar,mediumspringgreen:xr,mediumturquoise:Er,mediumvioletred:Pr,midnightblue:Cr,mintcream:Rr,mistyrose:Tr,moccasin:_r,navajowhite:Dr,navy:Mr,oldlace:Nr,olive:$r,olivedrab:Ir,orange:Or,orangered:Lr,orchid:Ur,palegoldenrod:qr,palegreen:Fr,paleturquoise:Sr,palevioletred:Wr,papayawhip:zr,peachpuff:Br,peru:jr,pink:Jr,plum:Gr,powderblue:Yr,purple:Hr,rebeccapurple:Vr,red:Xr,rosybrown:Qr,royalblue:Kr,saddlebrown:Zr,salmon:et,sandybrown:rt,seagreen:tt,seashell:at,sienna:ot,silver:nt,skyblue:it,slateblue:lt,slategray:st,slategrey:ft,snow:ct,springgreen:dt,steelblue:ut,tan:ht,teal:gt,thistle:vt,tomato:bt,turquoise:mt,violet:pt,wheat:yt,white:wt,whitesmoke:kt,yellow:At,yellowgreen:xt};function Pt(e,r=[]){return r[0]=(e>>16&255)/255,r[1]=(e>>8&255)/255,r[2]=(e&255)/255,r}function Ct(e){let r=e.toString(16);return r="000000".substring(0,6-r.length)+r,`#${r}`}function Rt(e){if(typeof e=="string"&&(e=Et[e.toLowerCase()]||e,e[0]==="#"&&(e=e.slice(1)),e.length===3)){const[r,t,a]=e;e=r+r+t+t+a+a}return parseInt(e,16)}function Tt(e){return(e[0]*255<<16)+(e[1]*255<<8)+(e[2]*255|0)}function _t(){const e=[],r=[];for(let a=0;a<32;a++)e[a]=a,r[a]=a;e[d.NORMAL_NPM]=d.NORMAL,e[d.ADD_NPM]=d.ADD,e[d.SCREEN_NPM]=d.SCREEN,r[d.NORMAL]=d.NORMAL_NPM,r[d.ADD]=d.ADD_NPM,r[d.SCREEN]=d.SCREEN_NPM;const t=[];return t.push(r),t.push(e),t}const x=_t();function Dt(e,r){return x[r?1:0][e]}function Mt(e,r,t,a){return t=t||new Float32Array(4),a||a===void 0?(t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r):(t[0]=e[0],t[1]=e[1],t[2]=e[2]),t[3]=r,t}function Nt(e,r){if(r===1)return(r*255<<24)+e;if(r===0)return 0;let t=e>>16&255,a=e>>8&255,o=e&255;return t=t*r+.5|0,a=a*r+.5|0,o=o*r+.5|0,(r*255<<24)+(t<<16)+(a<<8)+o}function $t(e,r,t,a){return t=t||new Float32Array(4),t[0]=(e>>16&255)/255,t[1]=(e>>8&255)/255,t[2]=(e&255)/255,(a||a===void 0)&&(t[0]*=r,t[1]*=r,t[2]*=r),t[3]=r,t}function It(e,r=null){const t=e*6;if(r=r||new Uint16Array(t),r.length!==t)throw new Error(`Out buffer length is incorrect, got ${r.length} and expected ${t}`);for(let a=0,o=0;a<t;a+=6,o+=4)r[a+0]=o+0,r[a+1]=o+1,r[a+2]=o+2,r[a+3]=o+0,r[a+4]=o+2,r[a+5]=o+3;return r}function E(e){if(e.BYTES_PER_ELEMENT===4)return e instanceof Float32Array?"Float32Array":e instanceof Uint32Array?"Uint32Array":"Int32Array";if(e.BYTES_PER_ELEMENT===2){if(e instanceof Uint16Array)return"Uint16Array"}else if(e.BYTES_PER_ELEMENT===1&&e instanceof Uint8Array)return"Uint8Array";return null}const Ot={Float32Array,Uint32Array,Int32Array,Uint8Array};function Lt(e,r){let t=0,a=0;const o={};for(let s=0;s<e.length;s++)a+=r[s],t+=e[s].length;const n=new ArrayBuffer(t*4);let i=null,l=0;for(let s=0;s<e.length;s++){const f=r[s],c=e[s],m=E(c);o[m]||(o[m]=new Ot[m](n)),i=o[m];for(let g=0;g<c.length;g++){const R=(g/f|0)*a+l,T=g%f;i[R+T]=c[g]}l+=f}return new Float32Array(n)}function Ut(e){return e+=e===0?1:0,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e+1}function qt(e){return!(e&e-1)&&!!e}function Ft(e){let r=(e>65535?1:0)<<4;e>>>=r;let t=(e>255?1:0)<<3;return e>>>=t,r|=t,t=(e>15?1:0)<<2,e>>>=t,r|=t,t=(e>3?1:0)<<1,e>>>=t,r|=t,r|e>>1}function St(e,r,t){const a=e.length;let o;if(r>=a||t===0)return;t=r+t>a?a-r:t;const n=a-t;for(o=r;o<n;++o)e[o]=e[o+t];e.length=n}function Wt(e){return e===0?0:e<0?-1:1}let zt=0;function Bt(){return++zt}const P={};function jt(e,r,t=3){if(P[r])return;let a=new Error().stack;typeof a>"u"?console.warn("PixiJS Deprecation Warning: ",`${r}
Deprecated since v${e}`):(a=a.split(`
`).splice(t).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${r}
Deprecated since v${e}`),console.warn(a),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${r}
Deprecated since v${e}`),console.warn(a))),P[r]=!0}const Jt={},v=Object.create(null),b=Object.create(null);function Gt(){let e;for(e in v)v[e].destroy();for(e in b)b[e].destroy()}function Yt(){let e;for(e in v)delete v[e];for(e in b)delete b[e]}class Ht{constructor(r,t,a){this.canvas=h.ADAPTER.createCanvas(),this.context=this.canvas.getContext("2d"),this.resolution=a||h.RESOLUTION,this.resize(r,t)}clear(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}resize(r,t){this.canvas.width=Math.round(r*this.resolution),this.canvas.height=Math.round(t*this.resolution)}destroy(){this.context=null,this.canvas=null}get width(){return this.canvas.width}set width(r){this.canvas.width=Math.round(r)}get height(){return this.canvas.height}set height(r){this.canvas.height=Math.round(r)}}function Vt(e){let r=e.width,t=e.height;const a=e.getContext("2d"),o=a.getImageData(0,0,r,t).data,n=o.length,i={top:null,left:null,right:null,bottom:null};let l=null,s,f,c;for(s=0;s<n;s+=4)o[s+3]!==0&&(f=s/4%r,c=~~(s/4/r),i.top===null&&(i.top=c),(i.left===null||f<i.left)&&(i.left=f),(i.right===null||i.right<f)&&(i.right=f+1),(i.bottom===null||i.bottom<c)&&(i.bottom=c));return i.top!==null&&(r=i.right-i.left,t=i.bottom-i.top+1,l=a.getImageData(i.left,i.top,r,t)),{height:t,width:r,data:l}}const C=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function Xt(e){const r=C.exec(e);if(r)return{mediaType:r[1]?r[1].toLowerCase():void 0,subType:r[2]?r[2].toLowerCase():void 0,charset:r[3]?r[3].toLowerCase():void 0,encoding:r[4]?r[4].toLowerCase():void 0,data:r[5]}}let p;function Qt(e,r=globalThis.location){if(e.startsWith("data:"))return"";r=r||globalThis.location,p||(p=document.createElement("a")),p.href=e;const t=w.parse(p.href),a=!t.port&&r.port===""||t.port===r.port;return t.hostname!==r.hostname||!a||t.protocol!==r.protocol?"anonymous":""}function Kt(e,r=1){const t=h.RETINA_PREFIX.exec(e);return t?parseFloat(t[1]):r}export{b as BaseTextureCache,Ht as CanvasRenderTarget,C as DATA_URI,ia as EventEmitter,Jt as ProgramCache,v as TextureCache,Yt as clearTextureCache,Dt as correctBlendMode,It as createIndicesForQuads,Xt as decomposeDataUri,jt as deprecation,Gt as destroyTextureCache,Qt as determineCrossOrigin,sa as earcut,E as getBufferType,Kt as getResolutionOfUrl,Pt as hex2rgb,Ct as hex2string,Lt as interleaveTypedArrays,oa as isMobile,qt as isPow2,U as isWebGLSupported,Ft as log2,Ut as nextPow2,A as path,x as premultiplyBlendMode,Mt as premultiplyRgba,Nt as premultiplyTint,$t as premultiplyTintToRgba,St as removeItems,Tt as rgb2hex,L as sayHello,Wt as sign,O as skipHello,Rt as string2hex,Vt as trimCanvas,Bt as uid,w as url};
//# sourceMappingURL=utils.min.mjs.map
